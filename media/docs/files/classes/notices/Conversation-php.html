<html><head><title>B:\Software\postActiv\classes\notices\Conversation.php - postActiv</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script></head><body class="FramedContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.4 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Conversation.php"></a>Conversation.php</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Conversation.php" >Conversation.php</a></td><td class=SDescription></td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#schemaDef" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">schemaDef</a></td><td class=SDescription>Returns an array representing the schema that describes the conversation in the backend database.</td></tr><tr class="SFunction"><td class=SEntry><a href="#beforeSchemaUpdate" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">beforeSchemaUpdate</a></td><td class=SDescription>Integrity checks before we</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#create" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">create</a></td><td class=SDescription>Factory method for creating a new conversation.</td></tr><tr class="SFunction"><td class=SEntry><a href="#noticeCount" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">noticeCount</a></td><td class=SDescription>Returns the number of notices in this conversation.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#getUrlFromNotice" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">getUrlFromNotice</a></td><td class=SDescription>Retrieves a the conversation for a given notice, and then returns the URL for the associated conversation.</td></tr><tr class="SFunction"><td class=SEntry><a href="#getUri" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">getUri</a></td><td class=SDescription>Returns the URI of the conversation.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#getUrl" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">getUrl</a></td><td class=SDescription>Returns the URL of the conversation.</td></tr><tr class="SFunction"><td class=SEntry><a href="#getNotices" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">getNotices</a></td><td class=SDescription>Returns a stream containing the notices associated with this conversation.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#insert" id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">insert</a></td><td class=SDescription>Save the conversation entry into the database.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="schemaDef"></a>schemaDef</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public static function schemaDef()</td></tr></table></blockquote><p>Returns an array representing the schema that describes the conversation in the backend database.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="beforeSchemaUpdate"></a>beforeSchemaUpdate</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>static public function beforeSchemaUpdate()</td></tr></table></blockquote><p>Integrity checks before we</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="create"></a>create</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function create(</td><td class=PType nowrap>ActivityContext&nbsp;</td><td class=PParameter nowrap>$ctx</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$created</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Factory method for creating a new conversation.</p><p>Use this for locally initiated conversations.&nbsp; Remote notices should preferrably supply their own conversation URIs in the OStatus feed.</p><h4 class=CHeading>Returns</h4><ul><li>the created Conversation object</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="noticeCount"></a>noticeCount</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function noticeCount(</td><td class=PParameter nowrap>$id</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns the number of notices in this conversation.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="getUrlFromNotice"></a>getUrlFromNotice</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static public function getUrlFromNotice(</td><td class=PType nowrap>Notice&nbsp;</td><td class=PParameter nowrap>$notice,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$anchor</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>true</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Retrieves a the conversation for a given notice, and then returns the URL for the associated conversation.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="getUri"></a>getUri</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function getUri()</td></tr></table></blockquote><p>Returns the URI of the conversation.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="getUrl"></a>getUrl</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function getUrl(</td><td class=PParameter nowrap>$noticeId</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns the URL of the conversation.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="getNotices"></a>getNotices</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function getNotices(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$scoped</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$offset</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>0,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$limit</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>500</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns a stream containing the notices associated with this conversation.</p><p>FIXME: ...will 500 ever be too low?&nbsp; Taken from ConversationAction::MAX_NOTICES</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="insert"></a>insert</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function insert()</td></tr></table></blockquote><p>Save the conversation entry into the database.</p></div></div></div>

</div><!--Content-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public static function schemaDef()</td></tr></table></blockquote>Returns an array representing the schema that describes the conversation in the backend database.</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>static public function beforeSchemaUpdate()</td></tr></table></blockquote>Integrity checks before we</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function create(</td><td class=PType nowrap>ActivityContext&nbsp;</td><td class=PParameter nowrap>$ctx</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$created</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Factory method for creating a new conversation.</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function noticeCount(</td><td class=PParameter nowrap>$id</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the number of notices in this conversation.</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static public function getUrlFromNotice(</td><td class=PType nowrap>Notice&nbsp;</td><td class=PParameter nowrap>$notice,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$anchor</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>true</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Retrieves a the conversation for a given notice, and then returns the URL for the associated conversation.</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function getUri()</td></tr></table></blockquote>Returns the URI of the conversation.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function getUrl(</td><td class=PParameter nowrap>$noticeId</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the URL of the conversation.</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function getNotices(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$scoped</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$offset</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>0,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$limit</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>500</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns a stream containing the notices associated with this conversation.</div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function insert()</td></tr></table></blockquote>Save the conversation entry into the database.</div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>