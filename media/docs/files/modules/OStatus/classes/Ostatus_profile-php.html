<html><head><title>B:\Software\postActiv\modules\OStatus\classes\Ostatus_profile.php - postActiv</title><link rel="stylesheet" type="text/css" href="../../../../styles/main.css"><script language=JavaScript src="../../../../javascript/main.js"></script></head><body class="FramedContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.4 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Ostatus_profile.php"></a>Ostatus_profile.php</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Ostatus_profile.php" >Ostatus_profile.php</a></td><td class=SDescription></td></tr><tr class="SSection"><td class=SEntry><a href="#Ostatus_profile" >Ostatus_profile</a></td><td class=SDescription>OStatus specific profile stores</td></tr><tr class="SClass"><td class=SEntry><a href="#Ostatus_profile" >Ostatus_profile</a></td><td class=SDescription>Superclass containing the OStatus profile as it is stored in the back-end database, as well as the related interfaces.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.schemaDef" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">schemaDef</a></td><td class=SDescription>Return table definition for Schema setup and DB_DataObject usage.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.getUri" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">getUri</a></td><td class=SDescription>Returns the URI of this profile.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.getFeedSub" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">getFeedSub</a></td><td class=SDescription>Returns the feedsubs that follow the feed URI of this profile.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.fromProfile" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">fromProfile</a></td><td class=SDescription>Returns the OStatus_profile associated with profile $profile.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.localProfile" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">localProfile</a></td><td class=SDescription>Fetch the locally stored profile for this feed.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.localGroup" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">localGroup</a></td><td class=SDescription>Fetch the postActiv-side profile for this feed.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.localPeopletag" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">localPeopletag</a></td><td class=SDescription>Fetch the postActiv-side peopletag for this feed</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.asActivityObject" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">asActivityObject</a></td><td class=SDescription>Returns an ActivityObject describing this remote user or group profile. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.asActivityNoun" id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">asActivityNoun</a></td><td class=SDescription>Returns an XML string fragment with profile information as an Activity Streams noun object with the given element type.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.isGroup" id=link10 onMouseOver="ShowTip(event, 'tt10', 'link10')" onMouseOut="HideTip('tt10')">isGroup</a></td><td class=SDescription>Returns true/false if this is a remote group</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.isPerson" id=link11 onMouseOver="ShowTip(event, 'tt11', 'link11')" onMouseOut="HideTip('tt11')">isPerson</a></td><td class=SDescription>Returns true/false if this is a person, as opposed to a group.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.isPeopletag" id=link12 onMouseOver="ShowTip(event, 'tt12', 'link12')" onMouseOut="HideTip('tt12')">isPeopletag</a></td><td class=SDescription>Returns true/false if this is a remote peopletag (list).</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.unsubscribe" id=link13 onMouseOver="ShowTip(event, 'tt13', 'link13')" onMouseOut="HideTip('tt13')">unsubscribe</a></td><td class=SDescription>Check if this remote profile has any active local subscriptions, and if not drop the WebSub subscription feed.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.garbageCollect" id=link14 onMouseOver="ShowTip(event, 'tt14', 'link14')" onMouseOut="HideTip('tt14')">garbageCollect</a></td><td class=SDescription>Check if this remote profile has any active local subscriptions, and if not drop the WebSub subscription feed.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.subscriberCount" id=link15 onMouseOver="ShowTip(event, 'tt15', 'link15')" onMouseOut="HideTip('tt15')">subscriberCount</a></td><td class=SDescription>Check if this remote profile has any active local subscriptions, so the WebSub subscription layer can decide if it can drop the feed.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.notify" id=link16 onMouseOver="ShowTip(event, 'tt16', 'link16')" onMouseOut="HideTip('tt16')">notify</a></td><td class=SDescription>Send an Activity Streams notification to the remote Salmon endpoint, if so configured.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.notifyActivity" id=link17 onMouseOver="ShowTip(event, 'tt17', 'link17')" onMouseOut="HideTip('tt17')">notifyActivity</a></td><td class=SDescription>Send a Salmon notification ping immediately, and confirm that we got an acceptable response from the remote site.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.notifyDeferred" id=link18 onMouseOver="ShowTip(event, 'tt18', 'link18')" onMouseOut="HideTip('tt18')">notifyDeferred</a></td><td class=SDescription>Queue a Salmon notification for later. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.notifyPrepXML" >notifyPrepXML</a></td><td class=SDescription>Returns the preamble XML for a notify OStatus activity.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.getBestName" id=link19 onMouseOver="ShowTip(event, 'tt19', 'link19')" onMouseOut="HideTip('tt19')">getBestName</a></td><td class=SDescription>Returns the best name for a group, peopletag, or profile, as appropriate.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.processFeed" id=link20 onMouseOver="ShowTip(event, 'tt20', 'link20')" onMouseOut="HideTip('tt20')">processFeed</a></td><td class=SDescription>Read and post notices for updates from the feed. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.processAtomFeed" id=link21 onMouseOver="ShowTip(event, 'tt21', 'link21')" onMouseOut="HideTip('tt21')">processAtomFeed</a></td><td class=SDescription>Meta function that constructs an array of items for processEntries harvested from an ATOM feed.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.processRssFeed" id=link22 onMouseOver="ShowTip(event, 'tt22', 'link22')" onMouseOut="HideTip('tt22')">processRssFeed</a></td><td class=SDescription>Meta function that constructs an array of items for processEntries harvested from an RSS feed.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.processEntries" id=link23 onMouseOver="ShowTip(event, 'tt23', 'link23')" onMouseOut="HideTip('tt23')">processEntries</a></td><td class=SDescription>Meta function the parses an array of feed entries through processEntry iteratively.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.processEntry" id=link24 onMouseOver="ShowTip(event, 'tt24', 'link24')" onMouseOut="HideTip('tt24')">processEntry</a></td><td class=SDescription>Process a posted entry from this feed source.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.processActivity" id=link25 onMouseOver="ShowTip(event, 'tt25', 'link25')" onMouseOut="HideTip('tt25')">processActivity</a></td><td class=SDescription>Given an Entry to process, create the appropriate ActivityObject for it. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.processPost" id=link26 onMouseOver="ShowTip(event, 'tt26', 'link26')" onMouseOut="HideTip('tt26')">processPost</a></td><td class=SDescription>Process an incoming post activity from this remote feed.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.filterAttention" id=link27 onMouseOver="ShowTip(event, 'tt27', 'link27')" onMouseOut="HideTip('tt27')">filterAttention</a></td><td class=SDescription>Filters a list of recipient ID URIs to just those for local delivery.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.ensureProfileURL" id=link28 onMouseOver="ShowTip(event, 'tt28', 'link28')" onMouseOut="HideTip('tt28')">ensureProfileURL</a></td><td class=SDescription>Look up and if necessary create an Ostatus_profile for the remote entity with the given profile page URL. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.getFromProfileURL" id=link29 onMouseOver="ShowTip(event, 'tt29', 'link29')" onMouseOut="HideTip('tt29')">getFromProfileURL</a></td><td class=SDescription>Look up the Ostatus_profile, if present, for a remote entity with the given profile page URL. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.getFromProfile" id=link30 onMouseOver="ShowTip(event, 'tt30', 'link30')" onMouseOut="HideTip('tt30')">getFromProfile</a></td><td class=SDescription>Returns the OStatus profile for a given local $profile</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.ensureFeedURL" id=link31 onMouseOver="ShowTip(event, 'tt31', 'link31')" onMouseOut="HideTip('tt31')">ensureFeedURL</a></td><td class=SDescription>Look up and if necessary create an Ostatus_profile for remote entity with the given update feed. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.ensureAtomFeed" id=link32 onMouseOver="ShowTip(event, 'tt32', 'link32')" onMouseOut="HideTip('tt32')">ensureAtomFeed</a></td><td class=SDescription>Look up and, if necessary, create an Ostatus_profile for the remote profile with the given Atom feed - actually loaded from the feed. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.ensureRssChannel" id=link33 onMouseOver="ShowTip(event, 'tt33', 'link33')" onMouseOut="HideTip('tt33')">ensureRssChannel</a></td><td class=SDescription>Look up and, if necessary, create an Ostatus_profile for the remote profile with the given RSS feed - actually loaded from the feed. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.updateAvatar" id=link34 onMouseOver="ShowTip(event, 'tt34', 'link34')" onMouseOut="HideTip('tt34')">updateAvatar</a></td><td class=SDescription>Download and update given avatar image</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectAvatar" id=link35 onMouseOver="ShowTip(event, 'tt35', 'link35')" onMouseOut="HideTip('tt35')">getActivityObjectAvatar</a></td><td class=SDescription>Pull avatar URL from ActivityObject or profile hints</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.getAvatar" id=link36 onMouseOver="ShowTip(event, 'tt36', 'link36')" onMouseOut="HideTip('tt36')">getAvatar</a></td><td class=SDescription>Get an appropriate avatar image source URL, if available.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.ensureActorProfile" id=link37 onMouseOver="ShowTip(event, 'tt37', 'link37')" onMouseOut="HideTip('tt37')">ensureActorProfile</a></td><td class=SDescription>Fetch, or build if necessary, an Ostatus_profile for the actor in a given Activity Streams activity. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.ensureActivityObjectProfile" id=link38 onMouseOver="ShowTip(event, 'tt38', 'link38')" onMouseOut="HideTip('tt38')">ensureActivityObjectProfile</a></td><td class=SDescription>Fetch, or build if necessary, an Ostatus_profile for the profile in a given Activity Streams object (can be subject, actor, or object). </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.getActorProfile" id=link39 onMouseOver="ShowTip(event, 'tt39', 'link39')" onMouseOut="HideTip('tt39')">getActorProfile</a></td><td class=SDescription>Retrieves the profile for the actor in an ActivityObject.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectProfile" id=link40 onMouseOver="ShowTip(event, 'tt40', 'link40')" onMouseOut="HideTip('tt40')">getActivityObjectProfile</a></td><td class=SDescription>Retrieves the URI from an ActivityObject and uses it to map out the appropriate OStatus_profile for the object.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectProfileURI" id=link41 onMouseOver="ShowTip(event, 'tt41', 'link41')" onMouseOut="HideTip('tt41')">getActivityObjectProfileURI</a></td><td class=SDescription>Get the identifier URI for the remote entity described by this ActivityObject. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.createActivityObjectProfile" id=link42 onMouseOver="ShowTip(event, 'tt42', 'link42')" onMouseOut="HideTip('tt42')">createActivityObjectProfile</a></td><td class=SDescription>Create local ostatus_profile and profile/user_group entries for the provided remote user or group. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.updateFromActivityObject" id=link43 onMouseOver="ShowTip(event, 'tt43', 'link43')" onMouseOut="HideTip('tt43')">updateFromActivityObject</a></td><td class=SDescription>Save any updated profile information to our local copy.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.updateProfile" id=link44 onMouseOver="ShowTip(event, 'tt44', 'link44')" onMouseOut="HideTip('tt44')">updateProfile</a></td><td class=SDescription>Update a local OStatus_profile.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.updateGroup" id=link45 onMouseOver="ShowTip(event, 'tt45', 'link45')" onMouseOut="HideTip('tt45')">updateGroup</a></td><td class=SDescription>Update a local OStatus_profile for a group.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.updatePeopletag" id=link46 onMouseOver="ShowTip(event, 'tt46', 'link46')" onMouseOut="HideTip('tt46')">updatePeopletag</a></td><td class=SDescription>Update a local OStatus_profile for a peopletag.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectHomepage" id=link47 onMouseOver="ShowTip(event, 'tt47', 'link47')" onMouseOut="HideTip('tt47')">getActivityObjectHomepage</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectLocation" id=link48 onMouseOver="ShowTip(event, 'tt48', 'link48')" onMouseOut="HideTip('tt48')">getActivityObjectLocation</a></td><td class=SDescription>If the ActivityObject specifies a geolocation, then return it. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectBio" id=link49 onMouseOver="ShowTip(event, 'tt49', 'link49')" onMouseOut="HideTip('tt49')">getActivityObjectBio</a></td><td class=SDescription>Returns the bio for the poster of an ActivityObject if one is specified, or null otherwise.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectNickname" id=link50 onMouseOver="ShowTip(event, 'tt50', 'link50')" onMouseOut="HideTip('tt50')">getActivityObjectNickname</a></td><td class=SDescription>Returns the nickname for the poster of an ActivityObject if one is specified, or null otherwise.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.nicknameFromURI" id=link51 onMouseOver="ShowTip(event, 'tt51', 'link51')" onMouseOut="HideTip('tt51')">nicknameFromURI</a></td><td class=SDescription>Retrieves the nickname for a profile given a URI</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.ensureWebFinger" >ensureWebFinger</a></td><td class=SDescription>Look up, and if necessary create, an Ostatus_profile for the remote entity with the given webfinger address. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.saveHTMLFile" id=link52 onMouseOver="ShowTip(event, 'tt52', 'link52')" onMouseOut="HideTip('tt52')">saveHTMLFile</a></td><td class=SDescription>Store the full-length scrubbed HTML of a remote notice to an attachment file on our server. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.ensureProfileURI" id=link53 onMouseOver="ShowTip(event, 'tt53', 'link53')" onMouseOut="HideTip('tt53')">ensureProfileURI</a></td><td class=SDescription>Make sure we get a profile for a given URI.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Ostatus_profile.checkAuthorship" id=link54 onMouseOver="ShowTip(event, 'tt54', 'link54')" onMouseOut="HideTip('tt54')">checkAuthorship</a></td><td class=SDescription>Figure out who authored an ActivityObject $activity and return their Profile.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Ostatus_profile.updateUriKeys" id=link55 onMouseOver="ShowTip(event, 'tt55', 'link55')" onMouseOut="HideTip('tt55')">updateUriKeys</a></td><td class=SDescription>A fix for older StatusNet sites upgrading to postActiv to update the keys in the database for given profile_uri and dedupe.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CSection"><div class=CTopic><h2 class=CTitle><a name="Ostatus_profile"></a>Ostatus_profile</h2><div class=CBody><p>OStatus specific profile stores</p><h4 class=CHeading>postActiv</h4><p>the micro-blogging software</p><h4 class=CHeading>Copyright</h4><p>Copyright &copy; 2016-2018, Maiyannah Bishop</p><h4 class=CHeading>Derived from code copyright various sources</h4><ul><li>GNU Social &copy; 2013-2016, Free Software Foundation, Inc</li><li>StatusNet &copy; 2008-2012, StatusNet, Inc</li></ul><h4 class=CHeading>License</h4><p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp;  See the GNU Affero General Public License for more details.</p><p>You should have received a copy of the GNU Affero General Public License along with this program.&nbsp;  If not, see <a href="http://www.gnu.org/licenses/" class=LURL target=_top>http://www.gnu.org/licenses/</a>.</p><p><a href="https://www.gnu.org/licenses/agpl.html" class=LURL target=_top>https://www.gnu.org/licenses/agpl.html</a></p><h4 class=CHeading>About</h4><p>OStatus specific profile stores.</p><p>I&rsquo;m not entirely clear on why we need a store specific for OStatus since it is the native protocol and ActivityPub builds on it, so this could be a candidate for merging into the normal profile - mb</p><h4 class=CHeading>PHP version</h4><p>Tested with PHP 7</p><h4 class=CHeading>File Authors</h4><ul><li>Brion Vibber <a href="#" onClick="location.href='mai' + 'lto:' + 'br' + 'ion' + '@' + 'pobo' + 'x.com'; return false;" class=LEMail>br<span style="display: none">.nosp@m.</span>ion<span>@</span>pobo<span style="display: none">.nosp@m.</span>x.com</a></li><li>James Walker <a href="#" onClick="location.href='mai' + 'lto:' + 'wal' + 'kah' + '@' + 'walka' + 'h.net'; return false;" class=LEMail>wal<span style="display: none">.nosp@m.</span>kah<span>@</span>walka<span style="display: none">.nosp@m.</span>h.net</a></li><li>Siebrand Mazeland <a href="#" onClick="location.href='mai' + 'lto:' + 's.maz' + 'eland' + '@' + 'xs4a' + 'll.nl'; return false;" class=LEMail>s.maz<span style="display: none">.nosp@m.</span>eland<span>@</span>xs4a<span style="display: none">.nosp@m.</span>ll.nl</a></li><li>Mikael Nordfeldth <a href="#" onClick="location.href='mai' + 'lto:' + 'm' + 'mn' + '@' + 'hetha' + 'ne.se'; return false;" class=LEMail>m<span style="display: none">.nosp@m.</span>mn<span>@</span>hetha<span style="display: none">.nosp@m.</span>ne.se</a></li><li>Chimo <a href="#" onClick="location.href='mai' + 'lto:' + 'ch' + 'imo' + '@' + 'chrom' + 'ic.org'; return false;" class=LEMail>ch<span style="display: none">.nosp@m.</span>imo<span>@</span>chrom<span style="display: none">.nosp@m.</span>ic.org</a></li><li>Maiyannah Bishop <a href="#" onClick="location.href='mai' + 'lto:' + 'maiyanna' + 'h.bishop' + '@' + 'postac' + 'tiv.com'; return false;" class=LEMail>maiyanna<span style="display: none">.nosp@m.</span>h.bishop<span>@</span>postac<span style="display: none">.nosp@m.</span>tiv.com</a></li></ul><h4 class=CHeading>Web</h4><ul><li>postActiv  <a href="http://www.postactiv.com" class=LURL target=_top>http://www.postactiv.com</a></li><li>GNU social <a href="https://www.gnu.org/s/social/" class=LURL target=_top>https://www.gnu.org/s/social/</a></li></ul></div></div></div>

<div class="CClass"><div class=CTopic><h2 class=CTitle><a name="Ostatus_profile"></a>Ostatus_profile</h2><div class=CBody><p>Superclass containing the OStatus profile as it is stored in the back-end database, as well as the related interfaces.</p><h4 class=CHeading>Properties</h4><ul><li>__table = &lsquo;ostatus_profile&rsquo;</li><li>uri</li><li>profile_id</li><li>group_id</li><li>peopletag_id</li><li>feeduri</li><li>salmonuri</li><li>avatar - remote URL of the last avatar we saved</li><li>created</li><li>modified</li></ul><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.schemaDef" id=link56 onMouseOver="ShowTip(event, 'tt1', 'link56')" onMouseOut="HideTip('tt1')">schemaDef</a></td><td class=SDescription>Return table definition for Schema setup and DB_DataObject usage.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.getUri" id=link57 onMouseOver="ShowTip(event, 'tt2', 'link57')" onMouseOut="HideTip('tt2')">getUri</a></td><td class=SDescription>Returns the URI of this profile.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.getFeedSub" id=link58 onMouseOver="ShowTip(event, 'tt3', 'link58')" onMouseOut="HideTip('tt3')">getFeedSub</a></td><td class=SDescription>Returns the feedsubs that follow the feed URI of this profile.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.fromProfile" id=link59 onMouseOver="ShowTip(event, 'tt4', 'link59')" onMouseOut="HideTip('tt4')">fromProfile</a></td><td class=SDescription>Returns the OStatus_profile associated with profile $profile.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.localProfile" id=link60 onMouseOver="ShowTip(event, 'tt5', 'link60')" onMouseOut="HideTip('tt5')">localProfile</a></td><td class=SDescription>Fetch the locally stored profile for this feed.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.localGroup" id=link61 onMouseOver="ShowTip(event, 'tt6', 'link61')" onMouseOut="HideTip('tt6')">localGroup</a></td><td class=SDescription>Fetch the postActiv-side profile for this feed.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.localPeopletag" id=link62 onMouseOver="ShowTip(event, 'tt7', 'link62')" onMouseOut="HideTip('tt7')">localPeopletag</a></td><td class=SDescription>Fetch the postActiv-side peopletag for this feed</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.asActivityObject" id=link63 onMouseOver="ShowTip(event, 'tt8', 'link63')" onMouseOut="HideTip('tt8')">asActivityObject</a></td><td class=SDescription>Returns an ActivityObject describing this remote user or group profile. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.asActivityNoun" id=link64 onMouseOver="ShowTip(event, 'tt9', 'link64')" onMouseOut="HideTip('tt9')">asActivityNoun</a></td><td class=SDescription>Returns an XML string fragment with profile information as an Activity Streams noun object with the given element type.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.isGroup" id=link65 onMouseOver="ShowTip(event, 'tt10', 'link65')" onMouseOut="HideTip('tt10')">isGroup</a></td><td class=SDescription>Returns true/false if this is a remote group</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.isPerson" id=link66 onMouseOver="ShowTip(event, 'tt11', 'link66')" onMouseOut="HideTip('tt11')">isPerson</a></td><td class=SDescription>Returns true/false if this is a person, as opposed to a group.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.isPeopletag" id=link67 onMouseOver="ShowTip(event, 'tt12', 'link67')" onMouseOut="HideTip('tt12')">isPeopletag</a></td><td class=SDescription>Returns true/false if this is a remote peopletag (list).</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.unsubscribe" id=link68 onMouseOver="ShowTip(event, 'tt13', 'link68')" onMouseOut="HideTip('tt13')">unsubscribe</a></td><td class=SDescription>Check if this remote profile has any active local subscriptions, and if not drop the WebSub subscription feed.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.garbageCollect" id=link69 onMouseOver="ShowTip(event, 'tt14', 'link69')" onMouseOut="HideTip('tt14')">garbageCollect</a></td><td class=SDescription>Check if this remote profile has any active local subscriptions, and if not drop the WebSub subscription feed.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.subscriberCount" id=link70 onMouseOver="ShowTip(event, 'tt15', 'link70')" onMouseOut="HideTip('tt15')">subscriberCount</a></td><td class=SDescription>Check if this remote profile has any active local subscriptions, so the WebSub subscription layer can decide if it can drop the feed.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.notify" id=link71 onMouseOver="ShowTip(event, 'tt16', 'link71')" onMouseOut="HideTip('tt16')">notify</a></td><td class=SDescription>Send an Activity Streams notification to the remote Salmon endpoint, if so configured.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.notifyActivity" id=link72 onMouseOver="ShowTip(event, 'tt17', 'link72')" onMouseOut="HideTip('tt17')">notifyActivity</a></td><td class=SDescription>Send a Salmon notification ping immediately, and confirm that we got an acceptable response from the remote site.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.notifyDeferred" id=link73 onMouseOver="ShowTip(event, 'tt18', 'link73')" onMouseOut="HideTip('tt18')">notifyDeferred</a></td><td class=SDescription>Queue a Salmon notification for later. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.notifyPrepXML" >notifyPrepXML</a></td><td class=SDescription>Returns the preamble XML for a notify OStatus activity.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.getBestName" id=link74 onMouseOver="ShowTip(event, 'tt19', 'link74')" onMouseOut="HideTip('tt19')">getBestName</a></td><td class=SDescription>Returns the best name for a group, peopletag, or profile, as appropriate.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.processFeed" id=link75 onMouseOver="ShowTip(event, 'tt20', 'link75')" onMouseOut="HideTip('tt20')">processFeed</a></td><td class=SDescription>Read and post notices for updates from the feed. </td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.processAtomFeed" id=link76 onMouseOver="ShowTip(event, 'tt21', 'link76')" onMouseOut="HideTip('tt21')">processAtomFeed</a></td><td class=SDescription>Meta function that constructs an array of items for processEntries harvested from an ATOM feed.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.processRssFeed" id=link77 onMouseOver="ShowTip(event, 'tt22', 'link77')" onMouseOut="HideTip('tt22')">processRssFeed</a></td><td class=SDescription>Meta function that constructs an array of items for processEntries harvested from an RSS feed.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.processEntries" id=link78 onMouseOver="ShowTip(event, 'tt23', 'link78')" onMouseOut="HideTip('tt23')">processEntries</a></td><td class=SDescription>Meta function the parses an array of feed entries through processEntry iteratively.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.processEntry" id=link79 onMouseOver="ShowTip(event, 'tt24', 'link79')" onMouseOut="HideTip('tt24')">processEntry</a></td><td class=SDescription>Process a posted entry from this feed source.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.processActivity" id=link80 onMouseOver="ShowTip(event, 'tt25', 'link80')" onMouseOut="HideTip('tt25')">processActivity</a></td><td class=SDescription>Given an Entry to process, create the appropriate ActivityObject for it. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.processPost" id=link81 onMouseOver="ShowTip(event, 'tt26', 'link81')" onMouseOut="HideTip('tt26')">processPost</a></td><td class=SDescription>Process an incoming post activity from this remote feed.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.filterAttention" id=link82 onMouseOver="ShowTip(event, 'tt27', 'link82')" onMouseOut="HideTip('tt27')">filterAttention</a></td><td class=SDescription>Filters a list of recipient ID URIs to just those for local delivery.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.ensureProfileURL" id=link83 onMouseOver="ShowTip(event, 'tt28', 'link83')" onMouseOut="HideTip('tt28')">ensureProfileURL</a></td><td class=SDescription>Look up and if necessary create an Ostatus_profile for the remote entity with the given profile page URL. </td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.getFromProfileURL" id=link84 onMouseOver="ShowTip(event, 'tt29', 'link84')" onMouseOut="HideTip('tt29')">getFromProfileURL</a></td><td class=SDescription>Look up the Ostatus_profile, if present, for a remote entity with the given profile page URL. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.getFromProfile" id=link85 onMouseOver="ShowTip(event, 'tt30', 'link85')" onMouseOut="HideTip('tt30')">getFromProfile</a></td><td class=SDescription>Returns the OStatus profile for a given local $profile</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.ensureFeedURL" id=link86 onMouseOver="ShowTip(event, 'tt31', 'link86')" onMouseOut="HideTip('tt31')">ensureFeedURL</a></td><td class=SDescription>Look up and if necessary create an Ostatus_profile for remote entity with the given update feed. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.ensureAtomFeed" id=link87 onMouseOver="ShowTip(event, 'tt32', 'link87')" onMouseOut="HideTip('tt32')">ensureAtomFeed</a></td><td class=SDescription>Look up and, if necessary, create an Ostatus_profile for the remote profile with the given Atom feed - actually loaded from the feed. </td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.ensureRssChannel" id=link88 onMouseOver="ShowTip(event, 'tt33', 'link88')" onMouseOut="HideTip('tt33')">ensureRssChannel</a></td><td class=SDescription>Look up and, if necessary, create an Ostatus_profile for the remote profile with the given RSS feed - actually loaded from the feed. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.updateAvatar" id=link89 onMouseOver="ShowTip(event, 'tt34', 'link89')" onMouseOut="HideTip('tt34')">updateAvatar</a></td><td class=SDescription>Download and update given avatar image</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectAvatar" id=link90 onMouseOver="ShowTip(event, 'tt35', 'link90')" onMouseOut="HideTip('tt35')">getActivityObjectAvatar</a></td><td class=SDescription>Pull avatar URL from ActivityObject or profile hints</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.getAvatar" id=link91 onMouseOver="ShowTip(event, 'tt36', 'link91')" onMouseOut="HideTip('tt36')">getAvatar</a></td><td class=SDescription>Get an appropriate avatar image source URL, if available.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.ensureActorProfile" id=link92 onMouseOver="ShowTip(event, 'tt37', 'link92')" onMouseOut="HideTip('tt37')">ensureActorProfile</a></td><td class=SDescription>Fetch, or build if necessary, an Ostatus_profile for the actor in a given Activity Streams activity. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.ensureActivityObjectProfile" id=link93 onMouseOver="ShowTip(event, 'tt38', 'link93')" onMouseOut="HideTip('tt38')">ensureActivityObjectProfile</a></td><td class=SDescription>Fetch, or build if necessary, an Ostatus_profile for the profile in a given Activity Streams object (can be subject, actor, or object). </td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.getActorProfile" id=link94 onMouseOver="ShowTip(event, 'tt39', 'link94')" onMouseOut="HideTip('tt39')">getActorProfile</a></td><td class=SDescription>Retrieves the profile for the actor in an ActivityObject.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectProfile" id=link95 onMouseOver="ShowTip(event, 'tt40', 'link95')" onMouseOut="HideTip('tt40')">getActivityObjectProfile</a></td><td class=SDescription>Retrieves the URI from an ActivityObject and uses it to map out the appropriate OStatus_profile for the object.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectProfileURI" id=link96 onMouseOver="ShowTip(event, 'tt41', 'link96')" onMouseOut="HideTip('tt41')">getActivityObjectProfileURI</a></td><td class=SDescription>Get the identifier URI for the remote entity described by this ActivityObject. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.createActivityObjectProfile" id=link97 onMouseOver="ShowTip(event, 'tt42', 'link97')" onMouseOut="HideTip('tt42')">createActivityObjectProfile</a></td><td class=SDescription>Create local ostatus_profile and profile/user_group entries for the provided remote user or group. </td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.updateFromActivityObject" id=link98 onMouseOver="ShowTip(event, 'tt43', 'link98')" onMouseOut="HideTip('tt43')">updateFromActivityObject</a></td><td class=SDescription>Save any updated profile information to our local copy.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.updateProfile" id=link99 onMouseOver="ShowTip(event, 'tt44', 'link99')" onMouseOut="HideTip('tt44')">updateProfile</a></td><td class=SDescription>Update a local OStatus_profile.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.updateGroup" id=link100 onMouseOver="ShowTip(event, 'tt45', 'link100')" onMouseOut="HideTip('tt45')">updateGroup</a></td><td class=SDescription>Update a local OStatus_profile for a group.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.updatePeopletag" id=link101 onMouseOver="ShowTip(event, 'tt46', 'link101')" onMouseOut="HideTip('tt46')">updatePeopletag</a></td><td class=SDescription>Update a local OStatus_profile for a peopletag.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectHomepage" id=link102 onMouseOver="ShowTip(event, 'tt47', 'link102')" onMouseOut="HideTip('tt47')">getActivityObjectHomepage</a></td><td class=SDescription></td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectLocation" id=link103 onMouseOver="ShowTip(event, 'tt48', 'link103')" onMouseOut="HideTip('tt48')">getActivityObjectLocation</a></td><td class=SDescription>If the ActivityObject specifies a geolocation, then return it. </td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectBio" id=link104 onMouseOver="ShowTip(event, 'tt49', 'link104')" onMouseOut="HideTip('tt49')">getActivityObjectBio</a></td><td class=SDescription>Returns the bio for the poster of an ActivityObject if one is specified, or null otherwise.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.getActivityObjectNickname" id=link105 onMouseOver="ShowTip(event, 'tt50', 'link105')" onMouseOut="HideTip('tt50')">getActivityObjectNickname</a></td><td class=SDescription>Returns the nickname for the poster of an ActivityObject if one is specified, or null otherwise.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.nicknameFromURI" id=link106 onMouseOver="ShowTip(event, 'tt51', 'link106')" onMouseOut="HideTip('tt51')">nicknameFromURI</a></td><td class=SDescription>Retrieves the nickname for a profile given a URI</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.ensureWebFinger" >ensureWebFinger</a></td><td class=SDescription>Look up, and if necessary create, an Ostatus_profile for the remote entity with the given webfinger address. </td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.saveHTMLFile" id=link107 onMouseOver="ShowTip(event, 'tt52', 'link107')" onMouseOut="HideTip('tt52')">saveHTMLFile</a></td><td class=SDescription>Store the full-length scrubbed HTML of a remote notice to an attachment file on our server. </td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.ensureProfileURI" id=link108 onMouseOver="ShowTip(event, 'tt53', 'link108')" onMouseOut="HideTip('tt53')">ensureProfileURI</a></td><td class=SDescription>Make sure we get a profile for a given URI.</td></tr><tr class="SFunction SMarked"><td class=SEntry><a href="#Ostatus_profile.checkAuthorship" id=link109 onMouseOver="ShowTip(event, 'tt54', 'link109')" onMouseOut="HideTip('tt54')">checkAuthorship</a></td><td class=SDescription>Figure out who authored an ActivityObject $activity and return their Profile.</td></tr><tr class="SFunction"><td class=SEntry><a href="#Ostatus_profile.updateUriKeys" id=link110 onMouseOver="ShowTip(event, 'tt55', 'link110')" onMouseOut="HideTip('tt55')">updateUriKeys</a></td><td class=SDescription>A fix for older StatusNet sites upgrading to postActiv to update the keys in the database for given profile_uri and dedupe.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.schemaDef"></a>schemaDef</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>static function schemaDef()</td></tr></table></blockquote><p>Return table definition for Schema setup and DB_DataObject usage.</p><h4 class=CHeading>Returns</h4><ul><li>array array of column definitions</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getUri"></a>getUri</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function getUri()</td></tr></table></blockquote><p>Returns the URI of this profile.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getFeedSub"></a>getFeedSub</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function getFeedSub()</td></tr></table></blockquote><p>Returns the feedsubs that follow the feed URI of this profile.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.fromProfile"></a>fromProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function fromProfile(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$profile</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns the OStatus_profile associated with profile $profile.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.localProfile"></a>localProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function localProfile()</td></tr></table></blockquote><p>Fetch the locally stored profile for this feed.</p><h4 class=CHeading>Returns</h4><ul><li>retrived Profile</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws NoProfileException if it was not found</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.localGroup"></a>localGroup</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function localGroup()</td></tr></table></blockquote><p>Fetch the postActiv-side profile for this feed.</p><h4 class=CHeading>Returns</h4><ul><li>Profile</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.localPeopletag"></a>localPeopletag</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function localPeopletag()</td></tr></table></blockquote><p>Fetch the postActiv-side peopletag for this feed</p><h4 class=CHeading>Returns</h4><ul><li>Profile</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.asActivityObject"></a>asActivityObject</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>function asActivityObject()</td></tr></table></blockquote><p>Returns an ActivityObject describing this remote user or group profile.&nbsp; Can then be used to generate Atom chunks.</p><h4 class=CHeading>Returns</h4><ul><li>ActivityObject</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.asActivityNoun"></a>asActivityNoun</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>function asActivityNoun(</td><td class=PParameter nowrap>$element</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns an XML string fragment with profile information as an Activity Streams noun object with the given element type.</p><p>Assumes that &lsquo;activity&rsquo; namespace has been previously defined.</p><h4 class=CHeading>FIXME</h4><ul><li>Replace with wrappers on asActivityObject when it&rsquo;s got everything.</li></ul><h4 class=CHeading>Parameters</h4><ul><li>string $element one of &lsquo;actor&rsquo;, &lsquo;subject&rsquo;, &lsquo;object&rsquo;, &lsquo;target&rsquo;</li></ul><h4 class=CHeading>Returns</h4><ul><li>string</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.isGroup"></a>isGroup</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>function isGroup()</td></tr></table></blockquote><p>Returns true/false if this is a remote group</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.isPerson"></a>isPerson</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function isPerson()</td></tr></table></blockquote><p>Returns true/false if this is a person, as opposed to a group.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.isPeopletag"></a>isPeopletag</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>function isPeopletag()</td></tr></table></blockquote><p>Returns true/false if this is a remote peopletag (list).</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.unsubscribe"></a>unsubscribe</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function unsubscribe()</td></tr></table></blockquote><p>Check if this remote profile has any active local subscriptions, and if not drop the WebSub subscription feed.</p><h4 class=CHeading>Returns</h4><ul><li>boolean true if subscription is removed, false if there are still subscribers to the feed</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws Exception of various kinds on failure.</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.garbageCollect"></a>garbageCollect</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function garbageCollect()</td></tr></table></blockquote><p>Check if this remote profile has any active local subscriptions, and if not drop the WebSub subscription feed.</p><h4 class=CHeading>Returns</h4><ul><li>boolean true if subscription is removed, false if there are still subscribers to the feed</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws Exception of various kinds on failure.</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.subscriberCount"></a>subscriberCount</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function subscriberCount()</td></tr></table></blockquote><p>Check if this remote profile has any active local subscriptions, so the WebSub subscription layer can decide if it can drop the feed.</p><p>This gets called via the FeedSubSubscriberCount event when running FeedSub::garbageCollect().</p><h4 class=CHeading>Returns</h4><ul><li>int</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws NoProfileException if there is no local profile for the object</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.notify"></a>notify</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function notify(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$actor,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$verb,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$object</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$target</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Send an Activity Streams notification to the remote Salmon endpoint, if so configured.</p><h4 class=CHeading>Parameters</h4><ul><li>Profile $actor  Actor who did the activity</li><li>string  $verb   Activity::SUBSCRIBE or Activity::JOIN</li><li>Object  $object object of the action; must define asActivityNoun($tag)</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.notifyActivity"></a>notifyActivity</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function notifyActivity(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$entry,</td></tr><tr><td></td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$actor</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Send a Salmon notification ping immediately, and confirm that we got an acceptable response from the remote site.</p><h4 class=CHeading>Parameters</h4><ul><li>mixed $entry XML string, Notice, or Activity</li><li>Profile $actor</li></ul><h4 class=CHeading>Returns</h4><ul><li>boolean success</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.notifyDeferred"></a>notifyDeferred</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function notifyDeferred(</td><td class=PParameter nowrap>$entry,</td></tr><tr><td></td><td class=PParameter nowrap>$actor</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Queue a Salmon notification for later.&nbsp; If queues are disabled we&rsquo;ll send immediately but won&rsquo;t get the return value.</p><h4 class=CHeading>Parameters</h4><ul><li>mixed $entry XML string, Notice, or Activity</li></ul><h4 class=CHeading>Returns</h4><ul><li>boolean success</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.notifyPrepXML"></a>notifyPrepXML</h3><div class=CBody><p>Returns the preamble XML for a notify OStatus activity.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getBestName"></a>getBestName</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>function getBestName()</td></tr></table></blockquote><p>Returns the best name for a group, peopletag, or profile, as appropriate.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.processFeed"></a>processFeed</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processFeed(</td><td class=PType nowrap>DOMDocument&nbsp;</td><td class=PParameter nowrap>$doc,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Read and post notices for updates from the feed.&nbsp;  Currently assumes that all items in the feed are new, coming from a WebSub hub.</p><h4 class=CHeading>Parameters</h4><ul><li>DOMDocument $doc</li><li>string $source identifier (&ldquo;push&rdquo;)</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.processAtomFeed"></a>processAtomFeed</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processAtomFeed(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feed,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Meta function that constructs an array of items for processEntries harvested from an ATOM feed.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.processRssFeed"></a>processRssFeed</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processRssFeed(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$rss,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Meta function that constructs an array of items for processEntries harvested from an RSS feed.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.processEntries"></a>processEntries</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processEntries(</td><td class=PType nowrap>DOMNodeList&nbsp;</td><td class=PParameter nowrap>$entries,</td></tr><tr><td></td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feed,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Meta function the parses an array of feed entries through processEntry iteratively.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.processEntry"></a>processEntry</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processEntry(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$entry,</td></tr><tr><td></td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feed,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Process a posted entry from this feed source.</p><h4 class=CHeading>Oarameters</h4><ul><li>DOMElement $entry</li><li>DOMElement $feed for context</li><li>string $source identifier (&ldquo;push&rdquo; or &ldquo;salmon&rdquo;)</li></ul><h4 class=CHeading>Returns</h4><ul><li>Notice - Notice representing the new (or existing) activity</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.processActivity"></a>processActivity</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processActivity(</td><td class=PType nowrap>Activity&nbsp;</td><td class=PParameter nowrap>$activity,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Given an Entry to process, create the appropriate ActivityObject for it.&nbsp;  Or, more specifically, trigger the events in postActiv that will process the activity.</p><h4 class=CHeading>TODO</h4><ul><li>Make this throw an exception</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.processPost"></a>processPost</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processPost(</td><td class=PParameter nowrap>$activity,</td></tr><tr><td></td><td class=PParameter nowrap>$method</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Process an incoming post activity from this remote feed.</p><h4 class=CHeading>Parameters</h4><ul><li>Activity $activity</li><li>string $method &lsquo;push&rsquo; or &lsquo;salmon&rsquo;</li></ul><h4 class=CHeading>Returns</h4><ul><li>mixed saved Notice or false</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.filterAttention"></a>filterAttention</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static public function filterAttention(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$sender,</td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$attention</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Filters a list of recipient ID URIs to just those for local delivery.</p><h4 class=CHeading>Parameters</h4><ul><li>Profile local profile of sender</li><li>array in/out &amp;$attention_uris set of URIs, will be pruned on output</li></ul><h4 class=CHeading>Returns</h4><ul><li>array of group IDs</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.ensureProfileURL"></a>ensureProfileURL</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureProfileURL(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$profile_url,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Look up and if necessary create an Ostatus_profile for the remote entity with the given profile page URL.&nbsp; This should never return null -- you will either get an object or an exception will be thrown.</p><h4 class=CHeading>Parameters</h4><ul><li>string $profile_url</li></ul><h4 class=CHeading>Returns</h4><ul><li>Ostatus_profile</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws Exception on various error conditions</li><li>throws OStatusShadowException if this reference would obscure a local user/group</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getFromProfileURL"></a>getFromProfileURL</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function getFromProfileURL(</td><td class=PParameter nowrap>$profile_url</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Look up the Ostatus_profile, if present, for a remote entity with the given profile page URL.&nbsp; Will return null for both unknown and invalid remote profiles.</p><h4 class=CHeading>Returns</h4><ul><li>mixed Ostatus_profile or null</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws OStatusShadowException for local profiles</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getFromProfile"></a>getFromProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function getFromProfile(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$profile</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns the OStatus profile for a given local $profile</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.ensureFeedURL"></a>ensureFeedURL</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureFeedURL(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$feed_url,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Look up and if necessary create an Ostatus_profile for remote entity with the given update feed.&nbsp; This should never return null -- you will either get an object or an exception will be thrown.</p><h4 class=CHeading>Returns</h4><ul><li>Ostatus_profile</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws Exception</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.ensureAtomFeed"></a>ensureAtomFeed</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureAtomFeed(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feedEl,</td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Look up and, if necessary, create an Ostatus_profile for the remote profile with the given Atom feed - actually loaded from the feed.&nbsp; This should never return null -- you will either get an object or an exception will be thrown.</p><h4 class=CHeading>Parameters</h4><ul><li>DOMElement $feedEl root element of a loaded Atom feed</li><li>array $hints additional discovery information passed from higher levels</li></ul><h4 class=CHeading>Returns</h4><ul><li>Ostatus_profile</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws Exception</li></ul><h4 class=CHeading>FIXME</h4><ul><li>Should this be marked public?</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.ensureRssChannel"></a>ensureRssChannel</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureRssChannel(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feedEl,</td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Look up and, if necessary, create an Ostatus_profile for the remote profile with the given RSS feed - actually loaded from the feed.&nbsp; This should never return null -- you will either get an object or an exception will be thrown.</p><h4 class=CHeading>Parameters</h4><ul><li>DOMElement $feedEl root element of a loaded RSS feed</li><li>array $hints additional discovery information passed from higher levels</li></ul><h4 class=CHeading>Returns</h4><ul><li>Ostatus_profile</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws Exception</li></ul><h4 class=CHeading>FIXME</h4><ul><li>Should this be marked public?</li><li>Posterous code needs to be removed</li><li>We should check whether this feed has elements with different &lt;author&gt; or &lt;dc:creator&gt; elements, and...&nbsp; I dunno.&nbsp;  Do something about that.</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.updateAvatar"></a>updateAvatar</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function updateAvatar(</td><td class=PParameter nowrap>$url,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$force</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>false</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Download and update given avatar image</p><h4 class=CHeading>Parameters</h4><ul><li>string $url</li></ul><h4 class=CHeading>Returns</h4><ul><li>Avatar    The Avatar we have on disk.&nbsp; (seldom used)</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws Exception in various failure cases</li></ul><h4 class=CHeading>FIXME</h4><ul><li>Hardcoded chmod is lame, but seems to be necessary to keep from accidentally saving images from command-line (queues) that can&rsquo;t be read from web server, which causes hard-to-notice problems later on: <a href="http://status.net/open-source/issues/2663" class=LURL target=_top>http://status.net/open-source/issues/2663</a></li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getActivityObjectAvatar"></a>getActivityObjectAvatar</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function getActivityObjectAvatar(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Pull avatar URL from ActivityObject or profile hints</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li><li>array $hints</li></ul><h4 class=CHeading>Returns</h4><ul><li>mixed URL string or false</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getAvatar"></a>getAvatar</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getAvatar(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$actor,</td></tr><tr><td></td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feed</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Get an appropriate avatar image source URL, if available.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $actor</li><li>DOMElement $feed</li></ul><h4 class=CHeading>Returns</h4><ul><li>string</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.ensureActorProfile"></a>ensureActorProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureActorProfile(</td><td class=PType nowrap>Activity&nbsp;</td><td class=PParameter nowrap>$activity,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Fetch, or build if necessary, an Ostatus_profile for the actor in a given Activity Streams activity.&nbsp;  This should never return null -- you will either get an object or an exception will be thrown.</p><h4 class=CHeading>Parameters</h4><ul><li>Activity $activity</li><li>string $feeduri if we already know the canonical feed URI!</li><li>string $salmonuri if we already know the salmon return channel URI</li></ul><h4 class=CHeading>Returns</h4><ul><li>Ostatus_profile</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.ensureActivityObjectProfile"></a>ensureActivityObjectProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureActivityObjectProfile(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Fetch, or build if necessary, an Ostatus_profile for the profile in a given Activity Streams object (can be subject, actor, or object).&nbsp;  This should never return null -- you will either get an object or an exception will be thrown.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li><li>array $hints additional discovery information passed from higher levels</li></ul><h4 class=CHeading>Returns</h4><ul><li>Ostatus_profile</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getActorProfile"></a>getActorProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function getActorProfile(</td><td class=PType nowrap>Activity&nbsp;</td><td class=PParameter nowrap>$activity</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Retrieves the profile for the actor in an ActivityObject.</p><h4 class=CHeading>Parameters</h4><ul><li>Activity $activity</li></ul><h4 class=CHeading>Returns</h4><ul><li>mixed matching Ostatus_profile or false if none known</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws ServerException if feed info invalid</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getActivityObjectProfile"></a>getActivityObjectProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectProfile(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Retrieves the URI from an ActivityObject and uses it to map out the appropriate OStatus_profile for the object.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $activity</li></ul><h4 class=CHeading>Returns</h4><ul><li>mixed matching Ostatus_profile or false if none known</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws ServerException if feed info invalid</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getActivityObjectProfileURI"></a>getActivityObjectProfileURI</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectProfileURI(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Get the identifier URI for the remote entity described by this ActivityObject.&nbsp; This URI is <b>not</b> guaranteed to be a resolvable HTTP/HTTPS URL.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li></ul><h4 class=CHeading>Returns</h4><ul><li>string</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws ServerException if feed info invalid</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.createActivityObjectProfile"></a>createActivityObjectProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function createActivityObjectProfile(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Create local ostatus_profile and profile/user_group entries for the provided remote user or group.&nbsp;  This should never return null -- you will either get an object or an exception will be thrown.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li><li>array $hints</li></ul><h4 class=CHeading>Returns</h4><ul><li>Ostatus_profile</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.updateFromActivityObject"></a>updateFromActivityObject</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function updateFromActivityObject(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Save any updated profile information to our local copy.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li><li>array $hints</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.updateProfile"></a>updateProfile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function updateProfile(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$profile,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Update a local OStatus_profile.</p><h4 class=CHeading>Parameters</h4><ul><li>profile $profile</li><li>ActivityObject $object</li><li>array $hints</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.updateGroup"></a>updateGroup</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function updateGroup(</td><td class=PType nowrap>User_group&nbsp;</td><td class=PParameter nowrap>$group,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Update a local OStatus_profile for a group.</p><h4 class=CHeading>Parameters</h4><ul><li>profile $profile</li><li>ActivityObject $object</li><li>array $hints</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.updatePeopletag"></a>updatePeopletag</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function updatePeopletag(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$tag,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Update a local OStatus_profile for a peopletag.</p><h4 class=CHeading>Parameters</h4><ul><li>profile $profile</li><li>ActivityObject $object</li><li>array $hints</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getActivityObjectHomepage"></a>getActivityObjectHomepage</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectHomepage(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Pretty much what it says on the tin</td><td class=CDLDescription>retrieves the stated homepage for an ActivityObject.</td></tr></table><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li><li>array $hints</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getActivityObjectLocation"></a>getActivityObjectLocation</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectLocation(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>If the ActivityObject specifies a geolocation, then return it.&nbsp;  Will return null otherwise.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li><li>array $hints</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getActivityObjectBio"></a>getActivityObjectBio</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectBio(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns the bio for the poster of an ActivityObject if one is specified, or null otherwise.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li><li>array $hints</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.getActivityObjectNickname"></a>getActivityObjectNickname</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function getActivityObjectNickname(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns the nickname for the poster of an ActivityObject if one is specified, or null otherwise.</p><h4 class=CHeading>Parameters</h4><ul><li>ActivityObject $object</li><li>array $hints</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.nicknameFromURI"></a>nicknameFromURI</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function nicknameFromURI(</td><td class=PParameter nowrap>$uri</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Retrieves the nickname for a profile given a URI</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.ensureWebFinger"></a>ensureWebFinger</h3><div class=CBody><p>Look up, and if necessary create, an Ostatus_profile for the remote entity with the given webfinger address.&nbsp;  This should never return null -- you will either get an object or an exception will be thrown.</p><h4 class=CHeading>Returns</h4><ul><li>string $addr webfinger address</li></ul><h4 class=CHeading>Returns</h4><ul><li>Ostatus_profile</li></ul><h4 class=CHeading>Error States</h4><ul><li>throws Exception on error conditions</li><li>throws OStatusShadowException if this reference would obscure a local user/group</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.saveHTMLFile"></a>saveHTMLFile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>function saveHTMLFile(</td><td class=PParameter nowrap>$title,</td></tr><tr><td></td><td class=PParameter nowrap>$rendered</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Store the full-length scrubbed HTML of a remote notice to an attachment file on our server.&nbsp; We&rsquo;ll link to this at the end of the cropped version.</p><h4 class=CHeading>Parameters</h4><ul><li>string $title plaintext for HTML page&rsquo;s title</li><li>string $rendered HTML fragment for HTML page&rsquo;s body</li></ul><h4 class=CHeading>Returns</h4><ul><li>File</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.ensureProfileURI"></a>ensureProfileURI</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function ensureProfileURI(</td><td class=PParameter nowrap>$uri</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Make sure we get a profile for a given URI.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.checkAuthorship"></a>checkAuthorship</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function checkAuthorship(</td><td class=PType nowrap>Activity&nbsp;</td><td class=PParameter nowrap>$activity</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Figure out who authored an ActivityObject $activity and return their Profile.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Ostatus_profile.updateUriKeys"></a>updateUriKeys</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function updateUriKeys(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$profile_uri,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>A fix for older StatusNet sites upgrading to postActiv to update the keys in the database for given profile_uri and dedupe.</p></div></div></div>

</div><!--Content-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>static function schemaDef()</td></tr></table></blockquote>Return table definition for Schema setup and DB_DataObject usage.</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function getUri()</td></tr></table></blockquote>Returns the URI of this profile.</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function getFeedSub()</td></tr></table></blockquote>Returns the feedsubs that follow the feed URI of this profile.</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function fromProfile(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$profile</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the OStatus_profile associated with profile $profile.</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function localProfile()</td></tr></table></blockquote>Fetch the locally stored profile for this feed.</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function localGroup()</td></tr></table></blockquote>Fetch the postActiv-side profile for this feed.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function localPeopletag()</td></tr></table></blockquote>Fetch the postActiv-side peopletag for this feed</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>function asActivityObject()</td></tr></table></blockquote>Returns an ActivityObject describing this remote user or group profile. </div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>function asActivityNoun(</td><td class=PParameter nowrap>$element</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns an XML string fragment with profile information as an Activity Streams noun object with the given element type.</div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>function isGroup()</td></tr></table></blockquote>Returns true/false if this is a remote group</div></div><div class=CToolTip id="tt11"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function isPerson()</td></tr></table></blockquote>Returns true/false if this is a person, as opposed to a group.</div></div><div class=CToolTip id="tt12"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>function isPeopletag()</td></tr></table></blockquote>Returns true/false if this is a remote peopletag (list).</div></div><div class=CToolTip id="tt13"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function unsubscribe()</td></tr></table></blockquote>Check if this remote profile has any active local subscriptions, and if not drop the WebSub subscription feed.</div></div><div class=CToolTip id="tt14"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function garbageCollect()</td></tr></table></blockquote>Check if this remote profile has any active local subscriptions, and if not drop the WebSub subscription feed.</div></div><div class=CToolTip id="tt15"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>public function subscriberCount()</td></tr></table></blockquote>Check if this remote profile has any active local subscriptions, so the WebSub subscription layer can decide if it can drop the feed.</div></div><div class=CToolTip id="tt16"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function notify(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$actor,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$verb,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$object</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$target</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>null</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Send an Activity Streams notification to the remote Salmon endpoint, if so configured.</div></div><div class=CToolTip id="tt17"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function notifyActivity(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$entry,</td></tr><tr><td></td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$actor</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Send a Salmon notification ping immediately, and confirm that we got an acceptable response from the remote site.</div></div><div class=CToolTip id="tt18"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function notifyDeferred(</td><td class=PParameter nowrap>$entry,</td></tr><tr><td></td><td class=PParameter nowrap>$actor</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Queue a Salmon notification for later. </div></div><div class=CToolTip id="tt19"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>function getBestName()</td></tr></table></blockquote>Returns the best name for a group, peopletag, or profile, as appropriate.</div></div><div class=CToolTip id="tt20"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processFeed(</td><td class=PType nowrap>DOMDocument&nbsp;</td><td class=PParameter nowrap>$doc,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Read and post notices for updates from the feed. </div></div><div class=CToolTip id="tt21"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processAtomFeed(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feed,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Meta function that constructs an array of items for processEntries harvested from an ATOM feed.</div></div><div class=CToolTip id="tt22"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processRssFeed(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$rss,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Meta function that constructs an array of items for processEntries harvested from an RSS feed.</div></div><div class=CToolTip id="tt23"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processEntries(</td><td class=PType nowrap>DOMNodeList&nbsp;</td><td class=PParameter nowrap>$entries,</td></tr><tr><td></td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feed,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Meta function the parses an array of feed entries through processEntry iteratively.</div></div><div class=CToolTip id="tt24"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processEntry(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$entry,</td></tr><tr><td></td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feed,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Process a posted entry from this feed source.</div></div><div class=CToolTip id="tt25"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processActivity(</td><td class=PType nowrap>Activity&nbsp;</td><td class=PParameter nowrap>$activity,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$source</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Given an Entry to process, create the appropriate ActivityObject for it. </div></div><div class=CToolTip id="tt26"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function processPost(</td><td class=PParameter nowrap>$activity,</td></tr><tr><td></td><td class=PParameter nowrap>$method</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Process an incoming post activity from this remote feed.</div></div><div class=CToolTip id="tt27"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static public function filterAttention(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$sender,</td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$attention</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Filters a list of recipient ID URIs to just those for local delivery.</div></div><div class=CToolTip id="tt28"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureProfileURL(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$profile_url,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Look up and if necessary create an Ostatus_profile for the remote entity with the given profile page URL. </div></div><div class=CToolTip id="tt29"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function getFromProfileURL(</td><td class=PParameter nowrap>$profile_url</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Look up the Ostatus_profile, if present, for a remote entity with the given profile page URL. </div></div><div class=CToolTip id="tt30"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function getFromProfile(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$profile</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the OStatus profile for a given local $profile</div></div><div class=CToolTip id="tt31"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureFeedURL(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$feed_url,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Look up and if necessary create an Ostatus_profile for remote entity with the given update feed. </div></div><div class=CToolTip id="tt32"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureAtomFeed(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feedEl,</td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Look up and, if necessary, create an Ostatus_profile for the remote profile with the given Atom feed - actually loaded from the feed. </div></div><div class=CToolTip id="tt33"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureRssChannel(</td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feedEl,</td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Look up and, if necessary, create an Ostatus_profile for the remote profile with the given RSS feed - actually loaded from the feed. </div></div><div class=CToolTip id="tt34"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function updateAvatar(</td><td class=PParameter nowrap>$url,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PParameter nowrap>$force</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>false</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Download and update given avatar image</div></div><div class=CToolTip id="tt35"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function getActivityObjectAvatar(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Pull avatar URL from ActivityObject or profile hints</div></div><div class=CToolTip id="tt36"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getAvatar(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$actor,</td></tr><tr><td></td><td class=PType nowrap>DOMElement&nbsp;</td><td class=PParameter nowrap>$feed</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Get an appropriate avatar image source URL, if available.</div></div><div class=CToolTip id="tt37"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureActorProfile(</td><td class=PType nowrap>Activity&nbsp;</td><td class=PParameter nowrap>$activity,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Fetch, or build if necessary, an Ostatus_profile for the actor in a given Activity Streams activity. </div></div><div class=CToolTip id="tt38"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function ensureActivityObjectProfile(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Fetch, or build if necessary, an Ostatus_profile for the profile in a given Activity Streams object (can be subject, actor, or object). </div></div><div class=CToolTip id="tt39"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function getActorProfile(</td><td class=PType nowrap>Activity&nbsp;</td><td class=PParameter nowrap>$activity</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Retrieves the profile for the actor in an ActivityObject.</div></div><div class=CToolTip id="tt40"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectProfile(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Retrieves the URI from an ActivityObject and uses it to map out the appropriate OStatus_profile for the object.</div></div><div class=CToolTip id="tt41"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectProfileURI(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Get the identifier URI for the remote entity described by this ActivityObject. </div></div><div class=CToolTip id="tt42"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function createActivityObjectProfile(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Create local ostatus_profile and profile/user_group entries for the provided remote user or group. </div></div><div class=CToolTip id="tt43"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function updateFromActivityObject(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Save any updated profile information to our local copy.</div></div><div class=CToolTip id="tt44"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function updateProfile(</td><td class=PType nowrap>Profile&nbsp;</td><td class=PParameter nowrap>$profile,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Update a local OStatus_profile.</div></div><div class=CToolTip id="tt45"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function updateGroup(</td><td class=PType nowrap>User_group&nbsp;</td><td class=PParameter nowrap>$group,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Update a local OStatus_profile for a group.</div></div><div class=CToolTip id="tt46"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function updatePeopletag(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$tag,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Update a local OStatus_profile for a peopletag.</div></div><div class=CToolTip id="tt47"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectHomepage(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote></div></div><div class=CToolTip id="tt48"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectLocation(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>If the ActivityObject specifies a geolocation, then return it. </div></div><div class=CToolTip id="tt49"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function getActivityObjectBio(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the bio for the poster of an ActivityObject if one is specified, or null otherwise.</div></div><div class=CToolTip id="tt50"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public static function getActivityObjectNickname(</td><td class=PType nowrap>ActivityObject&nbsp;</td><td class=PParameter nowrap>$object,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the nickname for the poster of an ActivityObject if one is specified, or null otherwise.</div></div><div class=CToolTip id="tt51"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>protected static function nicknameFromURI(</td><td class=PParameter nowrap>$uri</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Retrieves the nickname for a profile given a URI</div></div><div class=CToolTip id="tt52"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>function saveHTMLFile(</td><td class=PParameter nowrap>$title,</td></tr><tr><td></td><td class=PParameter nowrap>$rendered</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Store the full-length scrubbed HTML of a remote notice to an attachment file on our server. </div></div><div class=CToolTip id="tt53"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>static function ensureProfileURI(</td><td class=PParameter nowrap>$uri</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Make sure we get a profile for a given URI.</div></div><div class=CToolTip id="tt54"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function checkAuthorship(</td><td class=PType nowrap>Activity&nbsp;</td><td class=PParameter nowrap>$activity</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Figure out who authored an ActivityObject $activity and return their Profile.</div></div><div class=CToolTip id="tt55"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>public function updateUriKeys(</td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$profile_uri,</td><td class=PDefaultValuePrefix>&nbsp;&nbsp;</td><td class=PDefaultValue width=100%></td></tr><tr><td></td><td class=PType nowrap>array&nbsp;</td><td class=PParameter nowrap>$hints</td><td class=PDefaultValuePrefix>&nbsp;=&nbsp;</td><td class=PDefaultValue width=100%>array()</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>A fix for older StatusNet sites upgrading to postActiv to update the keys in the database for given profile_uri and dedupe.</div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>